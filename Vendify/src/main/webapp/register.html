<!DOCTYPE html>

<html>
    <head>
        <title>Register Form</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="icon" href="img/favicon.png">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
        <link rel='stylesheet' href='//cdnjs.cloudflare.com/ajax/libs/animate.css/3.2.3/animate.min.css'>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

        
        <link rel="stylesheet" type="text/css" href="css/register.css">
    <body>
        <div class="navbar">
            <img src="img/favicon.png"  style="height:45px;">
            <a href="#home">Home</a>
            <a href="login.html">Login</a>
            <a href="register.html">Register</a>
            <a href="adminLogin.html">Administrador</a>
            
        </div>
        <div class="container">
           <form action="registerUser" method="POST">
            <h1>Vendify Register Form</h1>
            <hr>
            <label for="email"><b>Email</b></label>
            <input type="email" placeholder="Enter your email" name="email" id="email" required>
            <script>
                document.getElementById('container').addEventListener('submit', function(event) {
                    var email = document.getElementById('email').value;
                    var regex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;

                    if (!regex.test(email)) {
                        event.preventDefault(); // Previene el envío del formulario
                        document.getElementById('mensajeError').innerText = 'Por favor, introduce un correo electrónico válido.';
                    }else {
                        document.getElementById('mensajeError').innerText = '';
                    }
                    });
            </script>

            <label for="user"><b>Username</b></label>
            <input type="text" placeholder="Enter your username" name="user" id="user" required>

            <label for="password"><b>Password</b></label>
            <input type="password" placeholder="Enter your password" name="password" id="password" required>

            <label for="telephone"><b>Telephone Number</b></label>
            <input type="text" placeholder="Enter your telephone number" name="telephone" id="telephone" required>
            <script>
                document.getElementById('container').addEventListener('submit', function(event) {
                    var telefono = document.getElementById('telephone').value;
                    var regex = /^[679]{1}[0-9]{8}$/; // Expresión regular para números de teléfono en España

                    if (!regex.test(telefono)) {
                        event.preventDefault(); // Previene el envío del formulario
                        document.getElementById('mensajeError').innerText = 'Por favor, introduce un número de teléfono válido en España.';
                    } else {
                        document.getElementById('mensajeError').innerText = '';
                    }
                });
            </script>

            <hr>
            
            <button type="submit" class="registerbtn">Register!</button>
            </form>
        </div>
        
        <div id="errorRegister" style="color: red; display: none;">
            <p><i class="fas fa-exclamation-circle"></i><strong>Error:</strong> This e-mail already exists!. Try again</p>

        </div>
        
        <script>
            // Verificar si la URL tiene el parámetro 'error'
            if (new URLSearchParams(window.location.search).has('error')) {
                document.getElementById('errorRegister').style.display = 'block';
            }
        </script>
        
     
    </body>
</html>
